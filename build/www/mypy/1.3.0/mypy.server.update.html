<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>mypy.server.update</title>
    <meta name="generator" content="pydoctor 23.4.0.dev0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    <div id="banner">    
    <div>
        <a href="/">Home</a>
        &gt; mypy-1.3.0 <!-- This is a placeholder -->
        
        <!-- (<a href=""&gt;show all versions</a&gt;) -->
    </div>
</div>

    <nav class="navbar navbar-default mainnavbar">
      
  
  <div class="container-fluid">


    <div class="navbar-header">
      
      <div class="navlinks">
        <span class="navbar-brand">
          mypy <a href="index.html">API Documentation</a>
        </span>

        <a href="moduleIndex.html">
          Modules
        </a>

        <a href="classIndex.html">
          Classes
        </a>

        <a href="nameIndex.html">
          Names
        </a>

        <div id="search-box-container">
          <div class="input-group">
            <input id="search-box" type="search" name="search-query" placeholder="Search..." aria-label="Search" minlength="2" class="form-control" autocomplete="off" />
            
            <span class="input-group-btn">
              <a style="display: none;" class="btn btn-default" id="search-clear-button" title="Clear" onclick="clearSearch()"><img src="fonts/x-circle.svg" alt="Clear" /></a>
              <a class="btn btn-default" id="search-help-button" title="Help" onclick="toggleSearchHelpText()"><img src="fonts/info.svg" alt="Help" /></a>
            </span>
          </div>
        </div>

      </div>

      <div id="search-results-container" style="display: none;">
        
        <div id="search-buttons">
          <span class="label label-default" id="search-docstrings-button">
          <label class="checkbox-inline">
            <input type="checkbox" id="toggle-search-in-docstrings-checkbox" value="false" onclick="toggleSearchInDocstrings()">
              search in docstrings
            </input>
          </label>
          </span>
          
        </div>
        
        <noscript>
            <h1>Cannot search: JavaScript is not supported/enabled in your browser.</h1>
        </noscript>

        <div class="hint" id="search-help-box">
          <p class="rst-last">
      
            Search bar offers the following options:
            <ul>   
                <li>
                  <strong>Term presence.</strong> The below example searches for documents that 
                    must contain “foo”, might contain “bar” and must not contain “baz”: <code>+foo bar -baz</code>
                </li> 

                <li>
                  <strong>Wildcards.</strong> The below example searches for documents with words beginning with “foo”: <code>foo*</code>
                </li> 

                <li>
                  <strong>Search in specific fields.</strong> The following search matches all objects 
                  in "twisted.mail" that matches “search”: <code>+qname:twisted.mail.* +search</code>

                  <p>
                    Possible fields: 'name', 'qname' (fully qualified name), 'docstring', and 'kind'.
                    Last two fields are only applicable if "search in docstrings" is enabled.
                  </p>
                </li>

                <li>
                  <strong>Fuzzy matches.</strong> The following search matches all documents 
                  that have a word within 1 edit distance of “foo”: <code>foo~1</code>
                </li>
            </ul>

          </p>
        </div>

        <div id="search-status"> </div>

        <div class="warning" id="search-warn-box" style="display: none;">
          <p class="rst-last"><span id="search-warn"></span></p>
        </div>

        <table id="search-results">
          <!-- Filled dynamically by JS -->
        </table>
        
        <div style="margin-top: 8px;">
          <p>Results provided by <a href="https://lunrjs.com">Lunr.js</a></p>
        </div>
      </div>

    </div>


  </div>
</nav>
    
    <div class="container-fluid">

      <!-- Side navigation -->
      <div class="sidebarcontainer" style="display: none;">
        
        <div class="sidebar"><nav class="sidebar">
  

  <div>

      <div class="thingTitle">
        <span>Module</span>
        <code class="thisobject"><a href="mypy.server.update.html" class="internal-link" title="This module">update</a></code> 
      </div>
      
      <div>
        

        
         

        <div class="childrenKindTitle">Classes</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="mypy.server.update.BlockedUpdate.html" class="internal-link" title="mypy.server.update.BlockedUpdate"><wbr></wbr>Blocked<wbr></wbr>Update</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="mypy.server.update.FineGrainedBuildManager.html" class="internal-link" title="mypy.server.update.FineGrainedBuildManager"><wbr></wbr>Fine<wbr></wbr>Grained<wbr></wbr>Build<wbr></wbr>Manager</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="mypy.server.update.NormalUpdate.html" class="internal-link" title="mypy.server.update.NormalUpdate"><wbr></wbr>Normal<wbr></wbr>Update</a></code>
            </div>
        

    </li>
</ul>

        <div class="childrenKindTitle">Functions</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="#calculate_active_triggers" class="internal-link" title="mypy.server.update.calculate_active_triggers">calculate<wbr></wbr>_active<wbr></wbr>_triggers</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#dedupe_modules" class="internal-link" title="mypy.server.update.dedupe_modules">dedupe<wbr></wbr>_modules</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#delete_module" class="internal-link" title="mypy.server.update.delete_module">delete<wbr></wbr>_module</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#ensure_deps_loaded" class="internal-link" title="mypy.server.update.ensure_deps_loaded">ensure<wbr></wbr>_deps<wbr></wbr>_loaded</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#ensure_trees_loaded" class="internal-link" title="mypy.server.update.ensure_trees_loaded">ensure<wbr></wbr>_trees<wbr></wbr>_loaded</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#extract_fnam_from_message" class="internal-link" title="mypy.server.update.extract_fnam_from_message">extract<wbr></wbr>_fnam<wbr></wbr>_from<wbr></wbr>_message</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#extract_possible_fnam_from_message" class="internal-link" title="mypy.server.update.extract_possible_fnam_from_message">extract<wbr></wbr>_possible<wbr></wbr>_fnam<wbr></wbr>_from<wbr></wbr>_message</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#find_relative_leaf_module" class="internal-link" title="mypy.server.update.find_relative_leaf_module">find<wbr></wbr>_relative<wbr></wbr>_leaf<wbr></wbr>_module</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#find_symbol_tables_recursive" class="internal-link" title="mypy.server.update.find_symbol_tables_recursive">find<wbr></wbr>_symbol<wbr></wbr>_tables<wbr></wbr>_recursive</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#find_targets_recursive" class="internal-link" title="mypy.server.update.find_targets_recursive">find<wbr></wbr>_targets<wbr></wbr>_recursive</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#find_unloaded_deps" class="internal-link" title="mypy.server.update.find_unloaded_deps">find<wbr></wbr>_unloaded<wbr></wbr>_deps</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#get_module_to_path_map" class="internal-link" title="mypy.server.update.get_module_to_path_map">get<wbr></wbr>_module<wbr></wbr>_to<wbr></wbr>_path<wbr></wbr>_map</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#get_sources" class="internal-link" title="mypy.server.update.get_sources">get<wbr></wbr>_sources</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#is_verbose" class="internal-link" title="mypy.server.update.is_verbose">is<wbr></wbr>_verbose</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#lookup_target" class="internal-link" title="mypy.server.update.lookup_target">lookup<wbr></wbr>_target</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#propagate_changes_using_dependencies" class="internal-link" title="mypy.server.update.propagate_changes_using_dependencies">propagate<wbr></wbr>_changes<wbr></wbr>_using<wbr></wbr>_dependencies</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#refresh_suppressed_submodules" class="internal-link" title="mypy.server.update.refresh_suppressed_submodules">refresh<wbr></wbr>_suppressed<wbr></wbr>_submodules</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#replace_modules_with_new_variants" class="internal-link" title="mypy.server.update.replace_modules_with_new_variants">replace<wbr></wbr>_modules<wbr></wbr>_with<wbr></wbr>_new<wbr></wbr>_variants</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#reprocess_nodes" class="internal-link" title="mypy.server.update.reprocess_nodes">reprocess<wbr></wbr>_nodes</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#sort_messages_preserving_file_order" class="internal-link" title="mypy.server.update.sort_messages_preserving_file_order">sort<wbr></wbr>_messages<wbr></wbr>_preserving<wbr></wbr>_file<wbr></wbr>_order</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#target_from_node" class="internal-link" title="mypy.server.update.target_from_node">target<wbr></wbr>_from<wbr></wbr>_node</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#update_deps" class="internal-link" title="mypy.server.update.update_deps">update<wbr></wbr>_deps</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#update_module_isolated" class="internal-link" title="mypy.server.update.update_module_isolated">update<wbr></wbr>_module<wbr></wbr>_isolated</a></code>
            </div>
        

    </li>
</ul> 

        
         

        <div class="childrenKindTitle">Variables</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="#INIT_SUFFIXES" class="internal-link" title="mypy.server.update.INIT_SUFFIXES">INIT<wbr></wbr>_SUFFIXES</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#MAX_ITER" class="internal-link" title="mypy.server.update.MAX_ITER">MAX<wbr></wbr>_ITER</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#SENSITIVE_INTERNAL_MODULES" class="internal-link" title="mypy.server.update.SENSITIVE_INTERNAL_MODULES">SENSITIVE<wbr></wbr>_INTERNAL<wbr></wbr>_MODULES</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#UpdateResult" class="internal-link" title="mypy.server.update.UpdateResult"><wbr></wbr>Update<wbr></wbr>Result</a></code>
            </div>
        

    </li>
</ul> 

        
         
        
      </div>
  </div><div>

      <div class="thingTitle">
        <span>Package</span>
        <code><a href="mypy.server.html" class="internal-link" title="The parent of this module">server</a></code> 
      </div>
      
      <div>
        

        <div class="childrenKindTitle">Modules</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="mypy.server.astdiff.html" class="internal-link" title="mypy.server.astdiff">astdiff</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="mypy.server.astmerge.html" class="internal-link" title="mypy.server.astmerge">astmerge</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="mypy.server.aststrip.html" class="internal-link" title="mypy.server.aststrip">aststrip</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="mypy.server.deps.html" class="internal-link" title="mypy.server.deps">deps</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="mypy.server.mergecheck.html" class="internal-link" title="mypy.server.mergecheck">mergecheck</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="mypy.server.objgraph.html" class="internal-link" title="mypy.server.objgraph">objgraph</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="mypy.server.subexpr.html" class="internal-link" title="mypy.server.subexpr">subexpr</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="mypy.server.target.html" class="internal-link" title="mypy.server.target">target</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="mypy.server.trigger.html" class="internal-link" title="mypy.server.trigger">trigger</a></code>
            </div>
        

    </li><li class=" thisobject">
        
        
        

        
            <div class="itemName"><code><a href="mypy.server.update.html" class="internal-link" title="mypy.server.update">update</a></code>
            </div>
        

    </li>
</ul> 

        
        

        
         

        
         

        
         

        
         
        
      </div>
  </div>

</nav>
        </div>
        <div id="collapseSideBar">
          <a class="btn btn-link" onclick="toggleSideBarCollapse()" title="Toggle Sidebar Collapse">
          </a>
        </div> 
        <script src="sidebartoggle.js" type="text/javascript"></script>
       
      </div>

      <div id="main" class="">
        

        

        <div class="page-header">
          <h1 class="module"><code><code><a href="index.html" class="internal-link">mypy</a></code><wbr></wbr>.<code><a href="mypy.server.html" class="internal-link" title="mypy.server">server</a></code><wbr></wbr>.<code><a href="mypy.server.update.html" class="internal-link" title="mypy.server.update">update</a></code></code></h1>
          <div id="showPrivate">
            <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
          </div>
        </div>

        <div class="categoryHeader">
          module documentation
        </div>

        <div class="extrasDocstring">
          <a href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py" class="sourceLink">(source)</a>
          <p></p>
        </div>

        <div class="moduleDocstring">
          <div><p class="pre">Update build by processing changes using fine-grained dependencies.

Use fine-grained dependencies to update targets in other modules that
may be affected by externally-visible changes in the changed modules.

This forms the core of the fine-grained incremental daemon mode. This
module is not used at all by the 'classic' (non-daemon) incremental
mode.

Here is some motivation for this mode:

* By keeping program state in memory between incremental runs, we
  only have to process changed modules, not their dependencies. The
  classic incremental mode has to deserialize the symbol tables of
  all dependencies of changed modules, which can be slow for large
  programs.

* Fine-grained dependencies allow processing only the relevant parts
  of modules indirectly affected by a change. Say, if only one function
  in a large module is affected by a change in another module, only this
  function is processed. The classic incremental mode always processes
  an entire file as a unit, which is typically much slower.

* It's possible to independently process individual modules within an
  import cycle (SCC). Small incremental changes can be fast independent
  of the size of the related SCC. In classic incremental mode, any change
  within a SCC requires the entire SCC to be processed, which can slow
  things down considerably.

Some terms:

* A *target* is a function/method definition or the top level of a module.
  We refer to targets using their fully qualified name (e.g.
  'mod.Cls.method'). Targets are the smallest units of processing during
  fine-grained incremental checking.

* A *trigger* represents the properties of a part of a program, and it
  gets triggered/fired when these properties change. For example,
  '&lt;mod.func&gt;' refers to a module-level function. It gets triggered if
  the signature of the function changes, or if the function is removed,
  for example.

Some program state is maintained across multiple build increments in
memory:

* The full ASTs of all modules are stored in memory all the time (this
  includes the type map).

* A fine-grained dependency map is maintained, which maps triggers to
  affected program locations (these can be targets, triggers, or
  classes). The latter determine what other parts of a program need to
  be processed again due to a fired trigger.

Here's a summary of how a fine-grained incremental program update happens:

* Determine which modules have changes in their source code since the
  previous update.

* Process changed modules one at a time. Perform a separate full update
  for each changed module, but only report the errors after all modules
  have been processed, since the intermediate states can generate bogus
  errors due to only seeing a partial set of changes.

* Each changed module is processed in full. We parse the module, and
  run semantic analysis to create a new AST and symbol table for the
  module. Reuse the existing ASTs and symbol tables of modules that
  have no changes in their source code. At the end of this stage, we have
  two ASTs and symbol tables for the changed module (the old and the new
  versions). The latter AST has not yet been type checked.

* Take a snapshot of the old symbol table. This is used later to determine
  which properties of the module have changed and which triggers to fire.

* Merge the old AST with the new AST, preserving the identities of
  externally visible AST nodes for which we can find a corresponding node
  in the new AST. (Look at mypy.server.astmerge for the details.) This
  way all external references to AST nodes in the changed module will
  continue to point to the right nodes (assuming they still have a valid
  target).

* Type check the new module.

* Take another snapshot of the symbol table of the changed module.
  Look at the differences between the old and new snapshots to determine
  which parts of the changed modules have changed. The result is a set of
  fired triggers.

* Using the dependency map and the fired triggers, decide which other
  targets have become stale and need to be reprocessed.

* Create new fine-grained dependencies for the changed module. We don't
  garbage collect old dependencies, since extra dependencies are relatively
  harmless (they take some memory and can theoretically slow things down
  a bit by causing redundant work). This is implemented in
  mypy.server.deps.

* Strip the stale AST nodes that we found above. This returns them to a
  state resembling the end of semantic analysis pass 1. We'll run semantic
  analysis again on the existing AST nodes, and since semantic analysis
  is not idempotent, we need to revert some changes made during semantic
  analysis. This is implemented in mypy.server.aststrip.

* Run semantic analyzer passes 2 and 3 on the stale AST nodes, and type
  check them. We also need to do the symbol table snapshot comparison
  dance to find any changes, and we need to merge ASTs to preserve AST node
  identities.

* If some triggers haven been fired, continue processing and repeat the
  previous steps until no triggers are fired.

This is module is tested using end-to-end fine-grained incremental mode
test cases (test-data/unit/fine-grained*.test).</p></div>
        </div>

        <div id="splitTables">
          <table class="children sortable" id="id658">
  
  
  <tr class="class">
    
    <td>Class</td>
    <td><code><a href="mypy.server.update.BlockedUpdate.html" class="internal-link" title="mypy.server.update.BlockedUpdate"><wbr></wbr>Blocked<wbr></wbr>Update</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="mypy.server.update.FineGrainedBuildManager.html" class="internal-link" title="mypy.server.update.FineGrainedBuildManager"><wbr></wbr>Fine<wbr></wbr>Grained<wbr></wbr>Build<wbr></wbr>Manager</a></code></td>
    <td><span class="undocumented">No class docstring; 0/12 instance variable, 6/6 methods documented</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="mypy.server.update.NormalUpdate.html" class="internal-link" title="mypy.server.update.NormalUpdate"><wbr></wbr>Normal<wbr></wbr>Update</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#calculate_active_triggers" class="internal-link" title="mypy.server.update.calculate_active_triggers">calculate<wbr></wbr>_active<wbr></wbr>_triggers</a></code></td>
    <td>Determine activated triggers by comparing old and new symbol tables.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#dedupe_modules" class="internal-link" title="mypy.server.update.dedupe_modules">dedupe<wbr></wbr>_modules</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#delete_module" class="internal-link" title="mypy.server.update.delete_module">delete<wbr></wbr>_module</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#ensure_deps_loaded" class="internal-link" title="mypy.server.update.ensure_deps_loaded">ensure<wbr></wbr>_deps<wbr></wbr>_loaded</a></code></td>
    <td>Ensure that the dependencies on a module are loaded.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#ensure_trees_loaded" class="internal-link" title="mypy.server.update.ensure_trees_loaded">ensure<wbr></wbr>_trees<wbr></wbr>_loaded</a></code></td>
    <td>Ensure that the modules in initial and their deps have loaded trees.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#extract_fnam_from_message" class="internal-link" title="mypy.server.update.extract_fnam_from_message">extract<wbr></wbr>_fnam<wbr></wbr>_from<wbr></wbr>_message</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#extract_possible_fnam_from_message" class="internal-link" title="mypy.server.update.extract_possible_fnam_from_message">extract<wbr></wbr>_possible<wbr></wbr>_fnam<wbr></wbr>_from<wbr></wbr>_message</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#find_relative_leaf_module" class="internal-link" title="mypy.server.update.find_relative_leaf_module">find<wbr></wbr>_relative<wbr></wbr>_leaf<wbr></wbr>_module</a></code></td>
    <td>Find a module in a list that directly imports no other module in the list.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#find_symbol_tables_recursive" class="internal-link" title="mypy.server.update.find_symbol_tables_recursive">find<wbr></wbr>_symbol<wbr></wbr>_tables<wbr></wbr>_recursive</a></code></td>
    <td>Find all nested symbol tables.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#find_targets_recursive" class="internal-link" title="mypy.server.update.find_targets_recursive">find<wbr></wbr>_targets<wbr></wbr>_recursive</a></code></td>
    <td>Find names of all targets that need to reprocessed, given some triggers.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#find_unloaded_deps" class="internal-link" title="mypy.server.update.find_unloaded_deps">find<wbr></wbr>_unloaded<wbr></wbr>_deps</a></code></td>
    <td>Find all the deps of the nodes in initial that haven't had their tree loaded.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#get_module_to_path_map" class="internal-link" title="mypy.server.update.get_module_to_path_map">get<wbr></wbr>_module<wbr></wbr>_to<wbr></wbr>_path<wbr></wbr>_map</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#get_sources" class="internal-link" title="mypy.server.update.get_sources">get<wbr></wbr>_sources</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#is_verbose" class="internal-link" title="mypy.server.update.is_verbose">is<wbr></wbr>_verbose</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#lookup_target" class="internal-link" title="mypy.server.update.lookup_target">lookup<wbr></wbr>_target</a></code></td>
    <td>Look up a target by fully-qualified name.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#propagate_changes_using_dependencies" class="internal-link" title="mypy.server.update.propagate_changes_using_dependencies">propagate<wbr></wbr>_changes<wbr></wbr>_using<wbr></wbr>_dependencies</a></code></td>
    <td>Transitively rechecks targets based on triggers and the dependency map.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#refresh_suppressed_submodules" class="internal-link" title="mypy.server.update.refresh_suppressed_submodules">refresh<wbr></wbr>_suppressed<wbr></wbr>_submodules</a></code></td>
    <td>Look for submodules that are now suppressed in target package.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#replace_modules_with_new_variants" class="internal-link" title="mypy.server.update.replace_modules_with_new_variants">replace<wbr></wbr>_modules<wbr></wbr>_with<wbr></wbr>_new<wbr></wbr>_variants</a></code></td>
    <td>Replace modules with newly builds versions.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#reprocess_nodes" class="internal-link" title="mypy.server.update.reprocess_nodes">reprocess<wbr></wbr>_nodes</a></code></td>
    <td>Reprocess a set of nodes within a single module.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#sort_messages_preserving_file_order" class="internal-link" title="mypy.server.update.sort_messages_preserving_file_order">sort<wbr></wbr>_messages<wbr></wbr>_preserving<wbr></wbr>_file<wbr></wbr>_order</a></code></td>
    <td>Sort messages so that the order of files is preserved.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#target_from_node" class="internal-link" title="mypy.server.update.target_from_node">target<wbr></wbr>_from<wbr></wbr>_node</a></code></td>
    <td>Return the target name corresponding to a deferred node.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#update_deps" class="internal-link" title="mypy.server.update.update_deps">update<wbr></wbr>_deps</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#update_module_isolated" class="internal-link" title="mypy.server.update.update_module_isolated">update<wbr></wbr>_module<wbr></wbr>_isolated</a></code></td>
    <td>Build a new version of one changed module only.</td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#INIT_SUFFIXES" class="internal-link" title="mypy.server.update.INIT_SUFFIXES">INIT<wbr></wbr>_SUFFIXES</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#MAX_ITER" class="internal-link" title="mypy.server.update.MAX_ITER">MAX<wbr></wbr>_ITER</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#SENSITIVE_INTERNAL_MODULES" class="internal-link" title="mypy.server.update.SENSITIVE_INTERNAL_MODULES">SENSITIVE<wbr></wbr>_INTERNAL<wbr></wbr>_MODULES</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="typealias">
    
    <td>Type Alias</td>
    <td><code><a href="#UpdateResult" class="internal-link" title="mypy.server.update.UpdateResult"><wbr></wbr>Update<wbr></wbr>Result</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
          

            
        </div>

        <div id="childList">
          <div class="basefunction">
  
  
  <a name="mypy.server.update.calculate_active_triggers">
    
  </a>
  <a name="calculate_active_triggers">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">calculate_active_triggers</span><span class="function-signature">(manager: <code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code>, old_snapshots: <code>dict[<wbr></wbr>str, <wbr></wbr>dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.server.astdiff.html#SymbolSnapshot" class="internal-link" title="mypy.server.astdiff.SymbolSnapshot">SymbolSnapshot</a>]]</code>, new_modules: <code>dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.nodes.MypyFile.html" class="internal-link" title="mypy.nodes.MypyFile">MypyFile</a>|None]</code>) -&gt; <code>set[<wbr></wbr>str]</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L756">
      
      (source)
    </a>
    <a class="headerLink" href="#calculate_active_triggers" title="mypy.server.update.calculate_active_triggers">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Determine activated triggers by comparing old and new symbol tables.

For example, if only the signature of function m.f is different in the new
symbol table, return {'&lt;m.f&gt;'}.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.dedupe_modules">
    
  </a>
  <a name="dedupe_modules">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">dedupe_modules</span><span class="function-signature">(modules: <code>list[<wbr></wbr>tuple[<wbr></wbr>str, <wbr></wbr>str]]</code>) -&gt; <code>list[<wbr></wbr>tuple[<wbr></wbr>str, <wbr></wbr>str]]</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L729">
      
      (source)
    </a>
    <a class="headerLink" href="#dedupe_modules" title="mypy.server.update.dedupe_modules">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.delete_module">
    
  </a>
  <a name="delete_module">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">delete_module</span><span class="function-signature">(module_id: <code>str</code>, path: <code>str</code>, graph: <code><a href="mypy.build.html#Graph" class="internal-link" title="mypy.build.Graph">Graph</a></code>, manager: <code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code>)</span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L707">
      
      (source)
    </a>
    <a class="headerLink" href="#delete_module" title="mypy.server.update.delete_module">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.ensure_deps_loaded">
    
  </a>
  <a name="ensure_deps_loaded">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">ensure_deps_loaded</span><span class="function-signature">(module: <code>str</code>, deps: <code>dict[<wbr></wbr>str, <wbr></wbr>set[<wbr></wbr>str]]</code>, graph: <code>dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code>)</span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L499">
      
      (source)
    </a>
    <a class="headerLink" href="#ensure_deps_loaded" title="mypy.server.update.ensure_deps_loaded">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Ensure that the dependencies on a module are loaded.

Dependencies are loaded into the 'deps' dictionary.

This also requires loading dependencies from any parent modules,
since dependencies will get stored with parent modules when a module
doesn't exist.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.ensure_trees_loaded">
    
  </a>
  <a name="ensure_trees_loaded">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">ensure_trees_loaded</span><span class="function-signature">(manager: <code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code>, graph: <code>dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code>, initial: <code>Sequence[<wbr></wbr>str]</code>)</span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L518">
      
      (source)
    </a>
    <a class="headerLink" href="#ensure_trees_loaded" title="mypy.server.update.ensure_trees_loaded">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Ensure that the modules in initial and their deps have loaded trees.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.extract_fnam_from_message">
    
  </a>
  <a name="extract_fnam_from_message">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">extract_fnam_from_message</span><span class="function-signature">(message: <code>str</code>) -&gt; <code>str|None</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L1283">
      
      (source)
    </a>
    <a class="headerLink" href="#extract_fnam_from_message" title="mypy.server.update.extract_fnam_from_message">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.extract_possible_fnam_from_message">
    
  </a>
  <a name="extract_possible_fnam_from_message">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">extract_possible_fnam_from_message</span><span class="function-signature">(message: <code>str</code>) -&gt; <code>str</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L1290">
      
      (source)
    </a>
    <a class="headerLink" href="#extract_possible_fnam_from_message" title="mypy.server.update.extract_possible_fnam_from_message">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.find_relative_leaf_module">
    
  </a>
  <a name="find_relative_leaf_module">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">find_relative_leaf_module</span><span class="function-signature">(modules: <code>list[<wbr></wbr>tuple[<wbr></wbr>str, <wbr></wbr>str]]</code>, graph: <code><a href="mypy.build.html#Graph" class="internal-link" title="mypy.build.Graph">Graph</a></code>) -&gt; <code>tuple[<wbr></wbr>str, <wbr></wbr>str]</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L680">
      
      (source)
    </a>
    <a class="headerLink" href="#find_relative_leaf_module" title="mypy.server.update.find_relative_leaf_module">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Find a module in a list that directly imports no other module in the list.

If no such module exists, return the lexicographically first module from the list.
Always return one of the items in the modules list.

NOTE: If both 'abc' and 'typing' have changed, an effect of the above rule is that
    we prefer 'abc', even if both are in the same SCC. This works around a false
    positive in 'typing', at least in tests.

Args:
    modules: List of (module, path) tuples (non-empty)
    graph: Program import graph that contains all modules in the module list</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.find_symbol_tables_recursive">
    
  </a>
  <a name="find_symbol_tables_recursive">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">find_symbol_tables_recursive</span><span class="function-signature">(prefix: <code>str</code>, symbols: <code><a href="mypy.nodes.SymbolTable.html" class="internal-link" title="mypy.nodes.SymbolTable">SymbolTable</a></code>) -&gt; <code>dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.nodes.SymbolTable.html" class="internal-link" title="mypy.nodes.SymbolTable">SymbolTable</a>]</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L1051">
      
      (source)
    </a>
    <a class="headerLink" href="#find_symbol_tables_recursive" title="mypy.server.update.find_symbol_tables_recursive">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Find all nested symbol tables.

Args:
    prefix: Full name prefix (used for return value keys and to filter result so that
        cross references to other modules aren't included)
    symbols: Root symbol table

Returns a dictionary from full name to corresponding symbol table.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.find_targets_recursive">
    
  </a>
  <a name="find_targets_recursive">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">find_targets_recursive</span><span class="function-signature">(manager: <code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code>, graph: <code><a href="mypy.build.html#Graph" class="internal-link" title="mypy.build.Graph">Graph</a></code>, triggers: <code>set[<wbr></wbr>str]</code>, deps: <code>dict[<wbr></wbr>str, <wbr></wbr>set[<wbr></wbr>str]]</code>, up_to_date_modules: <code>set[<wbr></wbr>str]</code>) -&gt; <code>tuple[<wbr></wbr>dict[<wbr></wbr>str, <wbr></wbr>set[<wbr></wbr><a href="mypy.checker.FineGrainedDeferredNode.html" class="internal-link" title="mypy.checker.FineGrainedDeferredNode">FineGrainedDeferredNode</a>]], <wbr></wbr>set[<wbr></wbr>str], <wbr></wbr>set[<wbr></wbr><a href="mypy.nodes.TypeInfo.html" class="internal-link" title="mypy.nodes.TypeInfo">TypeInfo</a>]]</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L893">
      
      (source)
    </a>
    <a class="headerLink" href="#find_targets_recursive" title="mypy.server.update.find_targets_recursive">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Find names of all targets that need to reprocessed, given some triggers.

Returns: A tuple containing a:
 * Dictionary from module id to a set of stale targets.
 * A set of module ids for unparsed modules with stale targets.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.find_unloaded_deps">
    
  </a>
  <a name="find_unloaded_deps">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">find_unloaded_deps</span><span class="function-signature">(manager: <code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code>, graph: <code>dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code>, initial: <code>Sequence[<wbr></wbr>str]</code>) -&gt; <code>list[<wbr></wbr>str]</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L471">
      
      (source)
    </a>
    <a class="headerLink" href="#find_unloaded_deps" title="mypy.server.update.find_unloaded_deps">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Find all the deps of the nodes in initial that haven't had their tree loaded.

The key invariant here is that if a module is loaded, so are all
of their dependencies. This means that when we encounter a loaded
module, we don't need to explore its dependencies.  (This
invariant is slightly violated when dependencies are added, which
can be handled by calling find_unloaded_deps directly on the new
dependencies.)</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.get_module_to_path_map">
    
  </a>
  <a name="get_module_to_path_map">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">get_module_to_path_map</span><span class="function-signature">(graph: <code><a href="mypy.build.html#Graph" class="internal-link" title="mypy.build.Graph">Graph</a></code>) -&gt; <code>dict[<wbr></wbr>str, <wbr></wbr>str]</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L739">
      
      (source)
    </a>
    <a class="headerLink" href="#get_module_to_path_map" title="mypy.server.update.get_module_to_path_map">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.get_sources">
    
  </a>
  <a name="get_sources">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">get_sources</span><span class="function-signature">(fscache: <code><a href="mypy.fscache.FileSystemCache.html" class="internal-link" title="mypy.fscache.FileSystemCache">FileSystemCache</a></code>, modules: <code>dict[<wbr></wbr>str, <wbr></wbr>str]</code>, changed_modules: <code>list[<wbr></wbr>tuple[<wbr></wbr>str, <wbr></wbr>str]]</code>, followed: <code>bool</code>) -&gt; <code>list[<wbr></wbr><a href="mypy.modulefinder.BuildSource.html" class="internal-link" title="mypy.modulefinder.BuildSource">BuildSource</a>]</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L743">
      
      (source)
    </a>
    <a class="headerLink" href="#get_sources" title="mypy.server.update.get_sources">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.is_verbose">
    
  </a>
  <a name="is_verbose">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">is_verbose</span><span class="function-signature">(manager: <code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code>) -&gt; <code>bool</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L1169">
      
      (source)
    </a>
    <a class="headerLink" href="#is_verbose" title="mypy.server.update.is_verbose">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.lookup_target">
    
  </a>
  <a name="lookup_target">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">lookup_target</span><span class="function-signature">(manager: <code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code>, target: <code>str</code>) -&gt; <code>tuple[<wbr></wbr>list[<wbr></wbr><a href="mypy.checker.FineGrainedDeferredNode.html" class="internal-link" title="mypy.checker.FineGrainedDeferredNode">FineGrainedDeferredNode</a>], <wbr></wbr><a href="mypy.nodes.TypeInfo.html" class="internal-link" title="mypy.nodes.TypeInfo">TypeInfo</a>|None]</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L1091">
      
      (source)
    </a>
    <a class="headerLink" href="#lookup_target" title="mypy.server.update.lookup_target">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Look up a target by fully-qualified name.

The first item in the return tuple is a list of deferred nodes that
needs to be reprocessed. If the target represents a TypeInfo corresponding
to a protocol, return it as a second item in the return tuple, otherwise None.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.propagate_changes_using_dependencies">
    
  </a>
  <a name="propagate_changes_using_dependencies">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">propagate_changes_using_dependencies</span><span class="function-signature">(manager: <code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code>, graph: <code>dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code>, deps: <code>dict[<wbr></wbr>str, <wbr></wbr>set[<wbr></wbr>str]]</code>, triggered: <code>set[<wbr></wbr>str]</code>, up_to_date_modules: <code>set[<wbr></wbr>str]</code>, targets_with_errors: <code>set[<wbr></wbr>str]</code>, processed_targets: <code>list[<wbr></wbr>str]</code>) -&gt; <code>list[<wbr></wbr>tuple[<wbr></wbr>str, <wbr></wbr>str]]</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L828">
      
      (source)
    </a>
    <a class="headerLink" href="#propagate_changes_using_dependencies" title="mypy.server.update.propagate_changes_using_dependencies">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Transitively rechecks targets based on triggers and the dependency map.

Returns a list (module id, path) tuples representing modules that contain
a target that needs to be reprocessed but that has not been parsed yet.

Processed targets should be appended to processed_targets (used in tests only,
to test the order of processing targets).</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.refresh_suppressed_submodules">
    
  </a>
  <a name="refresh_suppressed_submodules">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">refresh_suppressed_submodules</span><span class="function-signature">(module: <code>str</code>, path: <code>str|None</code>, deps: <code>dict[<wbr></wbr>str, <wbr></wbr>set[<wbr></wbr>str]]</code>, graph: <code><a href="mypy.build.html#Graph" class="internal-link" title="mypy.build.Graph">Graph</a></code>, fscache: <code><a href="mypy.fscache.FileSystemCache.html" class="internal-link" title="mypy.fscache.FileSystemCache">FileSystemCache</a></code>, refresh_file: <code>Callable[<wbr></wbr>[<wbr></wbr>str, <wbr></wbr>str], <wbr></wbr>list[<wbr></wbr>str]]</code>) -&gt; <code>list[<wbr></wbr>str]|None</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L1205">
      
      (source)
    </a>
    <a class="headerLink" href="#refresh_suppressed_submodules" title="mypy.server.update.refresh_suppressed_submodules">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Look for submodules that are now suppressed in target package.

If a submodule a.b gets added, we need to mark it as suppressed
in modules that contain "from a import b". Previously we assumed
that 'a.b' is not a module but a regular name.

This is only relevant when following imports normally.

Args:
    module: target package in which to look for submodules
    path: path of the module
    refresh_file: function that reads the AST of a module (returns error messages)

Return a list of errors from refresh_file() if it was called. If the
return value is None, we didn't call refresh_file().</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.replace_modules_with_new_variants">
    
  </a>
  <a name="replace_modules_with_new_variants">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">replace_modules_with_new_variants</span><span class="function-signature">(manager: <code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code>, graph: <code>dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code>, old_modules: <code>dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.nodes.MypyFile.html" class="internal-link" title="mypy.nodes.MypyFile">MypyFile</a>|None]</code>, new_modules: <code>dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.nodes.MypyFile.html" class="internal-link" title="mypy.nodes.MypyFile">MypyFile</a>|None]</code>)</span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L804">
      
      (source)
    </a>
    <a class="headerLink" href="#replace_modules_with_new_variants" title="mypy.server.update.replace_modules_with_new_variants">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Replace modules with newly builds versions.

Retain the identities of externally visible AST nodes in the
old ASTs so that references to the affected modules from other
modules will still be valid (unless something was deleted or
replaced with an incompatible definition, in which case there
will be dangling references that will be handled by
propagate_changes_using_dependencies).</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.reprocess_nodes">
    
  </a>
  <a name="reprocess_nodes">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">reprocess_nodes</span><span class="function-signature">(manager: <code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code>, graph: <code>dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code>, module_id: <code>str</code>, nodeset: <code>set[<wbr></wbr><a href="mypy.checker.FineGrainedDeferredNode.html" class="internal-link" title="mypy.checker.FineGrainedDeferredNode">FineGrainedDeferredNode</a>]</code>, deps: <code>dict[<wbr></wbr>str, <wbr></wbr>set[<wbr></wbr>str]]</code>, processed_targets: <code>list[<wbr></wbr>str]</code>) -&gt; <code>set[<wbr></wbr>str]</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L955">
      
      (source)
    </a>
    <a class="headerLink" href="#reprocess_nodes" title="mypy.server.update.reprocess_nodes">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Reprocess a set of nodes within a single module.

Return fired triggers.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.sort_messages_preserving_file_order">
    
  </a>
  <a name="sort_messages_preserving_file_order">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">sort_messages_preserving_file_order</span><span class="function-signature">(messages: <code>list[<wbr></wbr>str]</code>, prev_messages: <code>list[<wbr></wbr>str]</code>) -&gt; <code>list[<wbr></wbr>str]</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L1295">
      
      (source)
    </a>
    <a class="headerLink" href="#sort_messages_preserving_file_order" title="mypy.server.update.sort_messages_preserving_file_order">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Sort messages so that the order of files is preserved.

An update generates messages so that the files can be in a fairly
arbitrary order.  Preserve the order of files to avoid messages
getting reshuffled continuously.  If there are messages in
additional files, sort them towards the end.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.target_from_node">
    
  </a>
  <a name="target_from_node">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">target_from_node</span><span class="function-signature">(module: <code>str</code>, node: <code>(<a href="mypy.nodes.FuncDef.html" class="internal-link" title="mypy.nodes.FuncDef">FuncDef</a>|<a href="mypy.nodes.MypyFile.html" class="internal-link" title="mypy.nodes.MypyFile">MypyFile</a>)|<a href="mypy.nodes.OverloadedFuncDef.html" class="internal-link" title="mypy.nodes.OverloadedFuncDef">OverloadedFuncDef</a></code>) -&gt; <code>str|None</code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L1173">
      
      (source)
    </a>
    <a class="headerLink" href="#target_from_node" title="mypy.server.update.target_from_node">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Return the target name corresponding to a deferred node.

Args:
    module: Must be module id of the module that defines 'node'

Returns the target name, or None if the node is not a valid target in the given
module (for example, if it's actually defined in another module).</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.update_deps">
    
  </a>
  <a name="update_deps">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">update_deps</span><span class="function-signature">(module_id: <code>str</code>, nodes: <code>list[<wbr></wbr><a href="mypy.checker.FineGrainedDeferredNode.html" class="internal-link" title="mypy.checker.FineGrainedDeferredNode">FineGrainedDeferredNode</a>]</code>, graph: <code>dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code>, deps: <code>dict[<wbr></wbr>str, <wbr></wbr>set[<wbr></wbr>str]]</code>, options: <code><a href="mypy.options.Options.html" class="internal-link" title="mypy.options.Options">Options</a></code>)</span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L1070">
      
      (source)
    </a>
    <a class="headerLink" href="#update_deps" title="mypy.server.update.update_deps">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.update_module_isolated">
    
  </a>
  <a name="update_module_isolated">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">update_module_isolated</span><span class="function-signature">(module: <code>str</code>, path: <code>str</code>, manager: <code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code>, previous_modules: <code>dict[<wbr></wbr>str, <wbr></wbr>str]</code>, graph: <code><a href="mypy.build.html#Graph" class="internal-link" title="mypy.build.Graph">Graph</a></code>, force_removed: <code>bool</code>, followed: <code>bool</code>) -&gt; <code><a href="#UpdateResult" class="internal-link" title="mypy.server.update.UpdateResult">UpdateResult</a></code></span>:
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L560">
      
      (source)
    </a>
    <a class="headerLink" href="#update_module_isolated" title="mypy.server.update.update_module_isolated">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p class="pre">Build a new version of one changed module only.

Don't propagate changes to elsewhere in the program. Raise CompileError on
encountering a blocking error.

Args:
    module: Changed module (modified, created or deleted)
    path: Path of the changed module
    manager: Build manager
    graph: Build graph
    force_removed: If True, consider the module removed from the build even it the
        file exists

Returns a named tuple describing the result (see above for details).</p></div>
  </div>
</div><div class="baseconstant">
  
  
  <a name="mypy.server.update.INIT_SUFFIXES">
    
  </a>
  <a name="INIT_SUFFIXES">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">INIT_SUFFIXES</span>: <code>tuple[<wbr></wbr>str, <wbr></wbr><span class="rst-variable-ellipsis">...</span>]</code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L1195">
      
      (source)
    </a>
    <a class="headerLink" href="#INIT_SUFFIXES" title="mypy.server.update.INIT_SUFFIXES">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>(<wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">/__init__.py</span><span class="rst-variable-quote">'</span>, <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">/__init__.pyi</span><span class="rst-variable-quote">'</span>)</code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="mypy.server.update.MAX_ITER">
    
  </a>
  <a name="MAX_ITER">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">MAX_ITER</span>: <code>int</code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L167">
      
      (source)
    </a>
    <a class="headerLink" href="#MAX_ITER" title="mypy.server.update.MAX_ITER">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>1000</code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="mypy.server.update.SENSITIVE_INTERNAL_MODULES">
    
  </a>
  <a name="SENSITIVE_INTERNAL_MODULES">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">SENSITIVE_INTERNAL_MODULES</span> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L169">
      
      (source)
    </a>
    <a class="headerLink" href="#SENSITIVE_INTERNAL_MODULES" title="mypy.server.update.SENSITIVE_INTERNAL_MODULES">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>tuple(<wbr></wbr><a href="mypy.semanal_main.html#core_modules" class="internal-link" title="mypy.semanal_main.core_modules">core_modules</a>)+(<wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">mypy_extensions</span><span class="rst-variable-quote">'</span>, <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">typing_extensions</span><span class="rst-variable-quote">'</span>)</code></pre></td></tr></table>
  </div>
</div><div class="basetypealias">
  
  
  <a name="mypy.server.update.UpdateResult">
    
  </a>
  <a name="UpdateResult">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">UpdateResult</span>: <code>_TypeAlias</code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-1.3.0//mypy/server/update.py#L557">
      
      (source)
    </a>
    <a class="headerLink" href="#UpdateResult" title="mypy.server.update.UpdateResult">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>Union[<wbr></wbr><a href="mypy.server.update.NormalUpdate.html" class="internal-link" title="mypy.server.update.NormalUpdate">NormalUpdate</a>, <wbr></wbr><a href="mypy.server.update.BlockedUpdate.html" class="internal-link" title="mypy.server.update.BlockedUpdate">BlockedUpdate</a>]</code></pre></td></tr></table>
  </div>
</div>
        </div>
      
      </div>
    </div>

    <footer class="navbar navbar-default">

  
  <div class="container">
    <a href="index.html">API Documentation</a> for mypy,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    23.4.0.dev0 at 2023-05-11 00:57:26.
  </div>

  <!-- Search related scripts needs to be loaded at the end of HTML 
    parsing not to introduce overhead and display HTML data asap -->
  <script src="ajax.js" type="text/javascript"></script>
  <script src="searchlib.js" type="text/javascript"></script>
  <script src="search.js" type="text/javascript"></script>

</footer>
  
    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>